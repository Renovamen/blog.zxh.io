<!-- Go to Top -->
<!-- Borrowed a lot from: https://github.com/mashirozx/Sakura/ -->
<a class="to-top cd-top animated"></a>
<button class="to-top mobileGoTop animated" id="mobileGoTop" title="Go to top">
    <i class="fa fa-chevron-up" aria-hidden="true"></i>
</button>

<script>
    var offset = 100,
        offset_opacity = 1200,
        scroll_top_duration = 700,
        btn_height = 100,
        $back_to_top = $('.to-top');

    $(window).scroll(function () {
        if ($(this).scrollTop() > offset) {
            $back_to_top.addClass('cd-is-visible');
            $(".cd-top.cd-is-visible").css("top", ($(window).height() - btn_height - 10) + "px");
            setTimeout(() => {
                $back_to_top.addClass('cd-rotate');
            }, 500);
        } 
        else {
            $(".cd-top.cd-is-visible").css("top", - btn_height + "px");
            $back_to_top.removeClass('cd-is-visible cd-fade-out');
            setTimeout(() => {
                $back_to_top.removeClass('cd-rotate');
            }, 500);
        }
        if ($(this).scrollTop() > offset_opacity) {
            $back_to_top.addClass('cd-fade-out');
        }
    });

    // smooth scroll to top
    $back_to_top.on('click', function (event) {
        event.preventDefault();
        $('body,html').animate({
            scrollTop: 0,
        }, scroll_top_duration);
    });

    // mobile
    if (document.body.clientWidth <= 860) {
        window.onscroll = function () {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("mobileGoTop").style.display = "block";
            } 
            else {
                document.getElementById("mobileGoTop").style.display = "none";
            }
        }
    }
</script>