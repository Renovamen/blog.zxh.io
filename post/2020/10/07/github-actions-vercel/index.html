<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于博客的碎碎念 | Renovamen (Xiaohan Zou)</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/img/logo.svg">
    <meta name="description" content="Renovamen's blog, powered by VuePress, themed by Gungnir.">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/css/0.styles.852d2dc2.css" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/app.f12d3821.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/9.c0f557a8.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/1.d17bc128.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/2.392998c9.js" as="script"><link rel="preload" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/33.2a6ed037.js" as="script"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/10.89e21fe4.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/11.656a352d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/12.c4188696.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/13.b727d30a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/14.bf97155c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/15.82fa0f1e.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/16.8e914c29.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/17.fc2fc938.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/18.d0367105.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/19.78a9c95b.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/20.f7481028.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/21.25fdb8fc.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/22.29157f72.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/23.f2fd6163.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/24.75cdc38a.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/25.d3bcb598.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/26.4597b375.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/27.bf1d29e3.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/28.1fe7eb9c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/29.4cf68351.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/30.7b81fa77.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/31.485dd86d.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/32.728fff59.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/34.e98cc095.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/4.056e6071.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/5.60f6ea8c.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/6.886b3198.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/7.7ae91a5f.js"><link rel="prefetch" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/8.92572d1f.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/css/0.styles.852d2dc2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container post-container no-sidebar" data-v-2964d8cc><header class="navbar invert" data-v-2964d8cc><a href="/" class="home-link router-link-active"><span class="site-name">$ cd /home/</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M532.72 331.41999999999996h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V189.71999999999997c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H171.51999999999998v-32c0-2.6-2-4.6-4.6-4.6H139.51999999999998c-2.6 0-4.6 2-4.6 4.6v178.3H98.31999999999998v-32c0-2.6-2-4.6-4.6-4.6H66.31999999999998c-2.6 0-4.6 2-4.6 4.6V555.52h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V336.02c0.1-2.6-1.9-4.6-4.5-4.6z m-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z m146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"></path></g></svg>
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M299.52 267.52c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C491.52 390.28 378.93 267.52 299.52 267.52z m-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34z m84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87z m281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34z m-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"></path></g></svg>
  About
</a></div><div class="nav-item"><a href="/tags/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M43.51999999999998 295.638V91.51999999999998C43.51999999999998 65.00999999999998 65.00999999999998 43.51999999999998 91.51999999999998 43.51999999999998h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L337.34299999999996 541.461c-18.745 18.745-49.137 18.745-67.882 0L57.57899999999998 329.579A48 48 0 0 1 43.51999999999998 295.638zM155.51999999999998 107.51999999999998c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></g></svg>
  Tags
</a></div><div class="nav-item"><a href="/links/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M348.96954 506.10999999999996c7.39157 7.29792 6.18829 20.09661-3.00038 25.00356-77.713 41.80281-176.72559 29.9105-242.34331-35.7082C38.02375999999998 429.80226999999996 26.115999999999982 330.882 67.93380999999998 253.07399999999998c4.89125-9.095 17.68975-10.29834 25.00318-3.00043L209.74872 366.88707999999997l27.39411-27.39452c-0.68759-2.60974-1.594-5.00071-1.594-7.81361a32.00407 32.00407 0 1 1 32.00407 32.00455c-2.79723 0-5.20378-0.89075-7.79786-1.594l-27.40974 27.41015ZM555.4957999999999 346.58732a16.10336 16.10336 0 0 1-16.002 17.00242H507.38031a15.96956 15.96956 0 0 1-15.89265-15.00213C483.98670999999996 219.0692 379.97348 114.05426999999999 250.55077999999997 107.05327999999997a15.84486 15.84486 0 0 1-15.00191-15.90852V59.54651999999999A16.09389 16.09389 0 0 1 252.551 43.544249999999984C415.77491 52.13921999999998 546.9947199999999 183.361 555.4957999999999 346.58732Zm-96.01221-0.29692a16.21093 16.21093 0 0 1-16.11142 17.29934H411.16499999999996a16.06862 16.06862 0 0 1-15.89265-14.70522c-6.90712-77.01094-68.118-138.91037-144.92467-145.22376a15.94 15.94 0 0 1-14.79876-15.89289V155.65393a16.134 16.134 0 0 1 17.29908-16.096C362.97132 148.0591 451.07626999999997 236.16537999999997 459.48359 346.2904Z"></path></g></svg>
  Links
</a></div> <div class="nav-item"><a class="nav-link faa-parent animated-hover" style="cursor: pointer;"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M548.52 486.21999999999997L448.82 386.52c-4.5-4.5-10.6-7-17-7H415.52c27.6-35.3 44-79.7 44-128C459.52 136.61999999999998 366.41999999999996 43.51999999999998 251.51999999999998 43.51999999999998S43.51999999999998 136.61999999999998 43.51999999999998 251.51999999999998s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6 0.1-34zM251.51999999999998 379.52c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></g></svg>
      Search
    </a></div></nav></div></header> <div class="sidebar-mask" data-v-2964d8cc></div> <aside class="sidebar" data-v-2964d8cc><div class="personal-info-wrapper" data-v-2964d8cc><div class="mobile-hero-avatar" data-v-2964d8cc><img src="/img/avatar.jpeg" alt="hero" data-v-2964d8cc></div> <p class="mobile-heading" data-v-2964d8cc>Renovamen</p> <div class="sns-wrapper" data-v-2964d8cc><a href="https://github.com/Renovamen" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M245.61999999999998 372.21999999999997c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM539.52 321.71999999999997c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2z m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-0.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3z m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></g></svg></g></svg></a><a href="https://www.linkedin.com/in/xiaohan-zou-55bba0160" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M175.79999999999998 491.52H82.91999999999999V192.42h92.88zM129.30999999999997 151.61999999999998C99.60999999999999 151.61999999999998 75.51999999999998 127.01999999999998 75.51999999999998 97.31999999999998a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM523.42 491.52h-92.68V345.91999999999996c0-34.7-0.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V491.52h-92.78V192.42h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V491.52z"></path></g></svg></g></svg></a><a href="https://www.facebook.com/renovamen.zou" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M418.65999999999997 331.52l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V49.77999999999998S399.95 43.51999999999998 364.88 43.51999999999998c-73.22 0-121.08 44.38-121.08 124.72v70.62H162.40999999999997V331.52h81.39v224h100.17V331.52z"></path></g></svg></g></svg></a><a href="https://www.twitter.com/renovamen_zxh" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M502.89 195.236c0.325 4.548 0.325 9.097 0.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447 0.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-0.975-84.792-31.188-98.112-72.772 6.498 0.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></g></svg></g></svg></a><a href="https://www.zhihu.com/people/chao-neng-gui-su" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M12.344 17.963l-1.688 1.074-2.131-3.35c-0.44 1.402-1.172 2.665-2.139 3.825-0.402 0.483-0.82 0.918-1.301 1.375-0.155 0.147-0.775 0.717-0.878 0.82l-1.414-1.414c0.139-0.139 0.787-0.735 0.915-0.856 0.43-0.408 0.795-0.79 1.142-1.206 1.266-1.518 2.03-3.21 2.137-5.231H3v-2h4V7h-0.868c-0.689 1.266-1.558 2.222-2.618 2.857L2.486 8.143c1.395-0.838 2.425-2.604 3.038-5.36l1.952 0.434c-0.14 0.633-0.303 1.227-0.489 1.783H11.5v2H9v4h2.5v2H9.185l3.159 4.963z m3.838-0.07L17.298 17H19V7h-4v10h0.736l0.446 0.893zM13 5h8v14h-3l-2.5 2-1-2H13V5z"></path></g></svg></g></svg></a><a href="mailto:renovamenzxh@gmail.com" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M545.8199999999999 234.32c3.9-3.1 9.7-0.2 9.7 4.7V443.52c0 26.5-21.5 48-48 48H91.51999999999998c-26.5 0-48-21.5-48-48V239.11999999999998c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7 0.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM299.52 363.52c23.2 0.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H91.51999999999998C65.01999999999998 107.51999999999998 43.51999999999998 129.01999999999998 43.51999999999998 155.51999999999998v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></g></svg></g></svg></a> <a href="/rss.xml" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="0" height="0" viewBox="0 0 0 0" focusable="false" class="icon-stack v-icon" style="font-size:1.2em;"><g><!----> <svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="icon-sns v-icon v-inverse" style="font-size:1.2em;"><g><path d="M203.60099999999997 459.479c0 35.369-28.672 64.041-64.041 64.041S75.51999999999998 494.84799999999996 75.51999999999998 459.479s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041z m175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C83.17599999999999 219.28499999999997 75.51999999999998 226.62499999999997 75.51999999999998 235.77299999999997v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772 0.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149 0.001 16.489-7.655 15.995-16.79z m144.249 0.288C515.116 273.197 326.985 83.96499999999997 92.02299999999998 75.52999999999997 82.99299999999998 75.20599999999999 75.51999999999998 82.50099999999998 75.51999999999998 91.53599999999997v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465 0.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-0.001 16.329-7.474 16.005-16.504z"></path></g></svg></g></svg></a></div> <hr data-v-2964d8cc></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M532.72 331.41999999999996h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V189.71999999999997c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H171.51999999999998v-32c0-2.6-2-4.6-4.6-4.6H139.51999999999998c-2.6 0-4.6 2-4.6 4.6v178.3H98.31999999999998v-32c0-2.6-2-4.6-4.6-4.6H66.31999999999998c-2.6 0-4.6 2-4.6 4.6V555.52h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V336.02c0.1-2.6-1.9-4.6-4.5-4.6z m-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z m146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"></path></g></svg>
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M299.52 267.52c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C491.52 390.28 378.93 267.52 299.52 267.52z m-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34z m84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87z m281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34z m-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"></path></g></svg>
  About
</a></div><div class="nav-item"><a href="/tags/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M43.51999999999998 295.638V91.51999999999998C43.51999999999998 65.00999999999998 65.00999999999998 43.51999999999998 91.51999999999998 43.51999999999998h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L337.34299999999996 541.461c-18.745 18.745-49.137 18.745-67.882 0L57.57899999999998 329.579A48 48 0 0 1 43.51999999999998 295.638zM155.51999999999998 107.51999999999998c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></g></svg>
  Tags
</a></div><div class="nav-item"><a href="/links/" class="nav-link faa-parent animated-hover"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M348.96954 506.10999999999996c7.39157 7.29792 6.18829 20.09661-3.00038 25.00356-77.713 41.80281-176.72559 29.9105-242.34331-35.7082C38.02375999999998 429.80226999999996 26.115999999999982 330.882 67.93380999999998 253.07399999999998c4.89125-9.095 17.68975-10.29834 25.00318-3.00043L209.74872 366.88707999999997l27.39411-27.39452c-0.68759-2.60974-1.594-5.00071-1.594-7.81361a32.00407 32.00407 0 1 1 32.00407 32.00455c-2.79723 0-5.20378-0.89075-7.79786-1.594l-27.40974 27.41015ZM555.4957999999999 346.58732a16.10336 16.10336 0 0 1-16.002 17.00242H507.38031a15.96956 15.96956 0 0 1-15.89265-15.00213C483.98670999999996 219.0692 379.97348 114.05426999999999 250.55077999999997 107.05327999999997a15.84486 15.84486 0 0 1-15.00191-15.90852V59.54651999999999A16.09389 16.09389 0 0 1 252.551 43.544249999999984C415.77491 52.13921999999998 546.9947199999999 183.361 555.4957999999999 346.58732Zm-96.01221-0.29692a16.21093 16.21093 0 0 1-16.11142 17.29934H411.16499999999996a16.06862 16.06862 0 0 1-15.89265-14.70522c-6.90712-77.01094-68.118-138.91037-144.92467-145.22376a15.94 15.94 0 0 1-14.79876-15.89289V155.65393a16.134 16.134 0 0 1 17.29908-16.096C362.97132 148.0591 451.07626999999997 236.16537999999997 459.48359 346.2904Z"></path></g></svg>
  Links
</a></div> <div class="nav-item"><a class="nav-link faa-parent animated-hover" style="cursor: pointer;"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="faa-wrench v-icon" style="font-size:1.2em;"><g><path d="M548.52 486.21999999999997L448.82 386.52c-4.5-4.5-10.6-7-17-7H415.52c27.6-35.3 44-79.7 44-128C459.52 136.61999999999998 366.41999999999996 43.51999999999998 251.51999999999998 43.51999999999998S43.51999999999998 136.61999999999998 43.51999999999998 251.51999999999998s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6 0.1-34zM251.51999999999998 379.52c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></g></svg>
      Search
    </a></div></nav> <!----> </aside> <div class="post-header" data-v-35e85b42> <div class="header-content" data-v-35e85b42><div class="tags" data-v-35e85b42><span class="tag" data-v-35e85b42>摸鱼</span></div> <h1 class="title" data-v-35e85b42>关于博客的碎碎念</h1> <h3 class="subtitle" data-v-35e85b42>部署、优化以及乱七八糟的事</h3> <div class="icons" data-v-35e85b42><div class="icon" data-v-35e85b42><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;" data-v-35e85b42><g><path d="M389.12 347.52c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C135.71999999999997 347.52 75.51999999999998 407.71999999999997 75.51999999999998 481.91999999999996V507.52c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM475.52 507.52H123.51999999999998v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V507.52zM299.52 331.52c79.5 0 144-64.5 144-144S379.02 43.51999999999998 299.52 43.51999999999998 155.51999999999998 108.01999999999998 155.51999999999998 187.51999999999998s64.5 144 144 144z m0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"></path></g></svg> <span data-v-35e85b42>Renovamen</span></div> <div class="icon" data-v-35e85b42><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;" data-v-35e85b42><g><path d="M475.52 107.51999999999998h-48V55.51999999999998c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H235.51999999999998V55.51999999999998c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H123.51999999999998C97.01999999999998 107.51999999999998 75.51999999999998 129.01999999999998 75.51999999999998 155.51999999999998v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V155.51999999999998c0-26.5-21.5-48-48-48z m-6 400H129.51999999999998c-3.3 0-6-2.7-6-6V203.51999999999998h352v298c0 3.3-2.7 6-6 6z"></path></g></svg> <span data-v-35e85b42>2020-10-07</span></div> <div class="icon" data-v-35e85b42><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" focusable="false" class="v-icon" style="font-size:1.2em;" data-v-35e85b42><g><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 1 1-1.414-1.414zM12 20a7 7 0 1 0 0-14 7 7 0 0 0 0 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"></path></g></svg> <span data-v-35e85b42>9 min</span></div></div></div></div> <main class="page"><!----> <div class="theme-content content__default"><p>“虽然研究进度堪忧，但鱼还是要摸的”，在这样的理念的驱动下，菜鸡最终折腾出了一个目前看上去还算可以的方案。</p> <p>我的博客最初 fork 自 <a href="https://github.com/Huxpro/huxpro.github.io" target="_blank" rel="noopener noreferrer">Huxpro/huxpro.github.io</a>，用了一段时间之后开始瞎改，把别人干净的代码改得乱七八糟。博客用的是 Jekyll 框架，而 Jekyll 就是 Github Pages 的默认引擎，所以在部署的时候 Github Pages 连 build 这一步都帮你省了。于是在很长一段时间内，作为一只懒惰的菜鸡，我并没有什么动力来折腾这些东西。而现在之所以要折腾，是因为不折腾的确不行了。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>不过这版博客已经是用 VuePress 重写过后的版本了...</p></div> <h2 id="奇怪的起因"><a href="#奇怪的起因" class="header-anchor">#</a> 奇怪的起因</h2> <p>说起来这还是一个漫长的故事。首先我的博客的公式渲染引擎用的是 <a href="https://katex.org/" target="_blank" rel="noopener noreferrer">Katex</a>，因为它快，比 Mathjax 快多了（可以参考<a href="https://katex.org/" target="_blank" rel="noopener noreferrer">这里</a>）。</p> <p>kramdown 的默认数学公式渲染引擎是 Mathjax，而从 <code>v2.0.0</code> 开始 kramdown 似乎引入了一些插件来支持 Katex，比如 <a href="https://github.com/kramdown/math-katex" target="_blank" rel="noopener noreferrer">kramdown-math-katex</a>。那么问题来了，Github Pages 的 Jekyll 是不支持除了<a href="https://pages.github.com/versions/" target="_blank" rel="noopener noreferrer">这些插件</a>以外的插件的。那么唯一的办法就只有在本地 build 网站，然后把 build 好的文件 push 到 <code>gh-pages</code> 分支上去。</p> <p>不行，这样多麻烦，Jekyll 的天生优势不就没了吗，不然我为啥不用 Hexo 或者 Hugo，它们还比 Jekyll 快，不行不行。</p> <p>那个时候还没有 Github Actions 这种东西，我又完全不知道别的持续集成方案，就算知道了估计也不想去折腾。于是我在<a href="https://xuc.me/blog/katex-and-jekyll/" target="_blank" rel="noopener noreferrer">这里</a>看到了一个比较 hack 的方法，首先让 kramdown 以为我们要用 Mathjax：</p> <div class="language-yaml extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br></div><pre class="language-yaml"><code><span class="token key atrule">markdown</span><span class="token punctuation">:</span> kramdown    
<span class="token key atrule">kramdown</span><span class="token punctuation">:</span>
  <span class="token key atrule">math_engine</span><span class="token punctuation">:</span> mathjax
</code></pre></div><p>这样 kramdown 就会把像 <code>$$a + b$$</code> 这样的公式转换成 Mathjax 能识别的 HTML 形式：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>math/tex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">a <span class="token operator">+</span> b</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后通过 JavaScript 把 <code>&lt;script type=&quot;math/tex&quot;&gt;</code> 标签里的东西用 Katex 渲染出来：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;script[type='math/tex']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tex <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> katex<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>tex<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    displayMode<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;script[type='math/tex; mode=display']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tex <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> katex<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>tex<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%.*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    displayMode<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>虽然看上去不太优雅，但好歹能用，本菜鸡的理念是能用就行，于是就这样过了一段时间。直到几个月前，我发现我博客的公式不对劲了，它们突然都变成了这样：<code>\(a + b\)</code>。</p> <p>我一脸懵逼，第一反应是我是不是又把博客哪儿的代码搞崩了，但想了想我似乎也没有动过公式那部分的代码？而且当时我部署在 Coding Pages 上的博客公式还是正常的，那么大概率就是 Github Pages 哪里不对劲了。</p> <p>搜了一下发现 Github Pages 把 kramdown 的版本更新到了 <code>v2.2.0</code>，从这一版开始，为了兼容 Mathjax <code>v3.x</code>，kramdown 会把 inline math 转换成 <code>\(a + b\)</code> 的形式，把 block math 转换成 <code>\[a + b\]</code> 的形式（参考<a href="https://github.com/gettalong/kramdown/commit/c3acf8df1db49d2456050f4456f3f542294e2e8f" target="_blank" rel="noopener noreferrer">这个 commit</a>），于是上面那段脚本就坏掉了。</p> <p>于是一切都回到了最初的起点，摆在面前的办法只剩下把在本地用 kramdown <code>v2.1.0</code> build 好的网站扔 <code>gh-pages</code> 上去。这样干了几个月后懒惰的我实在忍不了了，并决定让 Github Actions 来帮我干这件事。</p> <p>所以我当初为啥不选 Hexo...</p> <h2 id="github-actions"><a href="#github-actions" class="header-anchor">#</a> Github Actions</h2> <p>在 repo 下建一个目录 <code>.github/workflow</code>，在这个目录下放一个 <code>.yaml</code> 格式的 workflow 文件。GitHub 只要发现 <code>.github/workflows</code> 下有 <code>.yaml</code> 文件，就会自动运行它们。<a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions" target="_blank" rel="noopener noreferrer">这里</a>是 workflow 文件的详细文档。</p> <h3 id="jekyll"><a href="#jekyll" class="header-anchor">#</a> Jekyll</h3> <p><a href="https://jekyllrb.com/docs/continuous-integration/github-actions/" target="_blank" rel="noopener noreferrer">Jekyll 官方</a>已经给了一个现成的 <a href="https://github.com/helaili/jekyll-action" target="_blank" rel="noopener noreferrer">action</a>，直接引用它就好：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> build Jekyll site and deploy it to GitHub Pages

<span class="token comment"># 检测 master 分支上的推送和 pr</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>
  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">jekyll-build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
      
      <span class="token comment"># 检测 vendor/bundle 下有没有已经安装好的包</span>
      <span class="token comment"># 如果有的话就不用再 bundle install 了，节省时间和资源</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> check cache
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> vendor/bundle
          <span class="token key atrule">key</span><span class="token punctuation">:</span> runner.os−gems−<span class="token punctuation">{</span>%raw%<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/Gemfile.lock')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span>% endraw %<span class="token punctuation">}</span>
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            ${{ runner.os }}-gems-</span>
      
      <span class="token comment"># 引用 helaili/jekyll-action 来打包 Jekyll 网站</span>
      <span class="token comment"># 并把打包好的文件推到同一个 repo 的 gh-pages 分支</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> build and deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> helaili/jekyll<span class="token punctuation">-</span>action@2.0.4
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">JEKYLL_PAT</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">target_branch</span><span class="token punctuation">:</span> <span class="token string">'gh-pages'</span>
</code></pre></div><p>相当于这个 workflow 会自动检测 <code>master</code> 分支上的 push 和 pull_request，一旦检测就到准备环境，然后运行 <code>bundle exec jekyll build</code> 打包网站，并把打包产物扔 <code>gh-pages</code> 分支上去。</p> <p>需要注意的是必须得有一个 <code>Gemfile</code> 和 <code>Gemfile.lock</code> 文件，<code>Gemfile</code> 里面写上要装的包，比如本博客的 <code>Gemfile</code> 长这样：</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>source <span class="token string">'https://rubygems.org'</span>

gem <span class="token string">'jekyll'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 4.0'</span>
gem <span class="token string">'kramdown'</span><span class="token punctuation">,</span> <span class="token string">'= 2.1.0'</span>  <span class="token comment"># 这里为了 Katex 把 kramdown 版本固定在了 2.1.0</span>
gem <span class="token string">'jemoji'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 0.11.1'</span>
gem <span class="token string">'jekyll-paginate'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 1.1.0'</span>
</code></pre></div><p>如果用了自定义域名，那就还需要在 <code>master</code> 分支放一个 <code>CNAME</code>，这样 <a href="https://github.com/helaili/jekyll-action" target="_blank" rel="noopener noreferrer">helaili/jekyll-action</a> 就会把 <code>CNAME</code> 也推到 <code>gh-pages</code> 分支去。直接在 <code>gh-pages</code> 分支加 <code>CNAME</code> 是没有什么用的，因为下次自动推送时它就会被清掉...</p> <h3 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h3> <p>所有能用 Node.js 搞定的东西（比如这个基于 VuePress 的博客）都能用以下工作流处理：</p> <h4 id="npm"><a href="#npm" class="header-anchor">#</a> npm</h4> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> build and deploy

<span class="token comment"># 检测 master 分支上的推送和 pr</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>
  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy-vuepress</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token comment"># Node.js 环境</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2.1.2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'12.x'</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache dependencies
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> ~/.npm
          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.os <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>node<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/package-lock.json')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            ${{ runner.os }}-node-</span>
      
      <span class="token comment"># npm run build</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          npm ci
          npm run build</span>
      
      <span class="token comment"># 推送到同一个 repo 的 gh-pages 分支</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> dist <span class="token comment"># build 输出文件夹</span>
          <span class="token key atrule">cname</span><span class="token punctuation">:</span> renovamen.ink  <span class="token comment"># 如果用了自定义域名，在这里设置</span>
</code></pre></div><p>其中 <a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer">peaceiris/actions-gh-pages</a> 也是一个别人写好的 action，能把指定路径的文件推到 <code>gh-pages</code> 分支。</p> <h4 id="yarn"><a href="#yarn" class="header-anchor">#</a> yarn</h4> <p>如果包管理工具用的 <code>yarn</code>：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> build and deploy

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>
  <span class="token key atrule">pull_request</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy-vuepress</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2.1.2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">'12'</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get yarn cache
        <span class="token key atrule">id</span><span class="token punctuation">:</span> yarn<span class="token punctuation">-</span>cache
        <span class="token key atrule">run</span><span class="token punctuation">:</span> echo &quot;<span class="token punctuation">:</span><span class="token punctuation">:</span>set<span class="token punctuation">-</span>output name=dir<span class="token punctuation">:</span><span class="token punctuation">:</span>$(yarn cache dir)&quot;

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache dependencies
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.yarn<span class="token punctuation">-</span>cache.outputs.dir <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.os <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>yarn<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/yarn.lock')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            ${{ runner.os }}-yarn-</span>
      
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          yarn install --frozen-lockfile
          yarn build</span>
      
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> dist
          <span class="token key atrule">cname</span><span class="token punctuation">:</span> renovamen.ink
</code></pre></div><h2 id="vercel"><a href="#vercel" class="header-anchor">#</a> Vercel</h2> <p>我一直以来都在听说双线部署甚至多线部署这种提高访问速度的操作，但一直没有去折腾。因为 Github Pages 虽然国内访问慢了点，但至少还是能访问的，那么能用就行了。直到几个月前，我发现 Github Pages 国内完全访问不上了...</p> <p>好的好的行吧双线部署我来了...</p> <p>那时候我所知的有境内节点的静态网站托管服务就 <a href="https://gitee.com/help/articles/4136" target="_blank" rel="noopener noreferrer">Gitee Pages</a> 和 <a href="https://help.coding.net/docs/devops/cd/static-website.html" target="_blank" rel="noopener noreferrer">Coding Pages</a> 俩，而 Gitee Pages 不能免费自定义域名，于是就把境内的线路解析到了 Coding Pages 上。</p> <p>直到不久之前，我发现新版 Coding Pages 的静态网站合并到腾讯云静态网站，并开始收费了...<s>之前旧版的静态网站表面上看上去好像还能正常部署，实际上并不能访问了</s>现在似乎又可以用了 orz...</p> <p>于是就手忙脚乱的把境内线路的博客扔到了 Vercel 上。只能说 Vercel 至少到目前为止还没发现什么毛病，有境内节点（不过感觉还是没有 Coding Pages 快就是了），而且是直接自动从 Github 仓库上拉代码然后打包加部署，对菜鸡相当友好。</p> <p>以前为啥就没发现呢。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Renovamen/renovamen.github.io/edit/main/blog/posts/2020-10-07-github-actions-vercel.md" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M541.42 185.61999999999998l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM327.71999999999997 143.32L65.11999999999998 405.91999999999996 43.91999999999998 527.42c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM167.61999999999998 383.41999999999996c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM131.51999999999998 467.52h48v36.3l-64.5 11.3-31.1-31.1L95.21999999999998 419.52H131.51999999999998v48z"></path></g></svg>
      Edit this page on GitHub
    </a></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/3/2021, 1:23:05 PM</span></div></footer> <!----> <div class="pager"><a href="/post/2020/09/04/bayesian-meta-learning/" class="previous">
        Previous<br> <span>Bayesian MAML</span></a> <a href="/post/2021/01/01/new-year/" class="next">
        Previous<br> <span>新年快乐</span></a></div> <!----></main> <ul class="catalog-wrapper" style="top:0px !important;" data-v-628ec192><li class="level-2 toc-link-奇怪的起因" data-v-628ec192>奇怪的起因</li><li class="level-2 toc-link-github-actions" data-v-628ec192>Github Actions</li><li class="level-3 toc-link-jekyll" data-v-628ec192>Jekyll</li><li class="level-3 toc-link-node-js" data-v-628ec192>Node.js</li><li class="level-4 toc-link-npm" data-v-628ec192>npm</li><li class="level-4 toc-link-yarn" data-v-628ec192>yarn</li><li class="level-2 toc-link-vercel" data-v-628ec192>Vercel</li></ul> <div class="search-page" data-v-2964d8cc><svg aria-hidden="true" width="34.56" height="34.56" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:2.16em;"><g><path d="M282.549 424.996L88.20599999999999 230.652c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-0.04L299.52 328.025l154.745-154.021c9.379-9.335 24.544-9.317 33.901 0.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L316.491 424.996c-9.373 9.372-24.569 9.372-33.942 0z"></path></g></svg> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="menu-btn-container" data-v-2964d8cc><div class="menu-btn-wrapper"><div class="menu-btn"><div class="menu-btn-icon" style="display:;"><span></span> <span></span> <span></span></div> <div class="menu-text" style="display:none;">0</div> <svg class="menu-svg"><circle cx="50%" cy="50%" r="48%" class="menu-border" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div> <div class="menu-btn-child-wrapper"><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode menu-btn-child"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M267.52 139.51999999999998l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM123.51999999999998 203.51999999999998l26.66-53.33L203.51999999999998 123.51999999999998l-53.34-26.67L123.51999999999998 43.51999999999998 96.85999999999999 96.84999999999998 43.51999999999998 123.51999999999998l53.34 26.67L123.51999999999998 203.51999999999998z m352 128l-26.66 53.33L395.52 411.52l53.34 26.67L475.52 491.52l26.66-53.33L555.52 411.52l-53.34-26.67L475.52 331.52z m70.62-193.77L461.28999999999996 52.899999999999984C455.04999999999995 46.63999999999998 446.85999999999996 43.51999999999998 438.66999999999996 43.51999999999998c-8.19 0-16.38 3.12-22.63 9.38L52.899999999999984 416.03999999999996c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM402.96999999999997 246.98l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"></path></g></svg></a> <div class="menu-btn-child"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M282.549 424.996L88.20599999999999 230.652c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-0.04L299.52 328.025l154.745-154.021c9.379-9.335 24.544-9.317 33.901 0.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L316.491 424.996c-9.373 9.372-24.569 9.372-33.942 0z"></path></g></svg></div> <div class="menu-btn-child"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M316.491 174.04399999999998l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901 0.04L299.52 271.015 144.77499999999998 425.036c-9.379 9.335-24.544 9.317-33.901-0.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L282.54999999999995 174.045c9.372-9.373 24.568-9.373 33.941-0.001z"></path></g></svg></div> <div class="menu-btn-child menu-toc-btn"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 599.04 599.04" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M91.51999999999998 91.51999999999998a48 48 0 1 0 48 48 48 48 0 0 0-48-48z m0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48z m0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48z m448 16H219.51999999999998a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z m0-320H219.51999999999998a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V123.51999999999998a16 16 0 0 0-16-16z m0 160H219.51999999999998a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"></path></g></svg></div> <div class="menu-btn-child menu-btn-sidebar"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" focusable="false" class="v-icon" style="font-size:1.2em;"><g><path d="M3 3h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z m5 2H4v14h4V5z m2 0v14h10V5H10z"></path></g></svg></div></div></div></div> <div class="footer-wrapper footer" data-v-48eb48db data-v-2964d8cc><span data-v-48eb48db>
      &copy; <a href="https://github.com/Renovamen" target="_blank">Renovamen</a> 2018-2020
      <br>
      Powered by <a href="https://vuepress.vuejs.org" target="_blank">VuePress</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir" target="_blank">Gungnir</a>
    </span></div></div><div class="global-ui"></div></div>
    <script src="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/app.f12d3821.js" defer></script><script src="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/9.c0f557a8.js" defer></script><script src="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/1.d17bc128.js" defer></script><script src="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/2.392998c9.js" defer></script><script src="https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@gh-pages/assets/js/33.2a6ed037.js" defer></script>
  </body>
</html>
